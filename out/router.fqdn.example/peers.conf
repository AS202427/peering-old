protocol bgp UPSTREAM_AS3257_v4 from upstream4 {
  description "GTT";
  local 192.0.2.2 as 65536;
  neighbor 192.0.2.1 as 3257;

  ipv4 {
    export filter {
      add_as_specific_prepends(3257);
      handle_as_specific_no_export(3257);
      upstream_export();
    };
  };
}

protocol bgp UPSTREAM_AS3257_v6 from upstream6 {
  description "GTT";
  local fd00:192:0:2::2 as 65536;
  neighbor fd00:192:0:2::1 as 3257;

  ipv6 {
    export filter {
      add_as_specific_prepends(3257);
      handle_as_specific_no_export(3257);
      upstream_export();
    };
  };
}

protocol bgp pmacctd_v4 from telemetry4 {
  description "pmacctd";
  local 127.0.0.1 as 65536;
  neighbor 127.0.0.2 port 180 as 65536;
  rr client;
}

protocol bgp LOOKINGGLASS_AS199036_v4 from lookingglass4 {
  description "NLNOG RING";
  local 198.51.100.1 as 65536;
  neighbor 82.94.230.130 as 199036;
  multihop;
}

protocol bgp LOOKINGGLASS_AS199036_v6 from lookingglass6 {
  description "NLNOG RING";
  local 2001:db8::200:5eff:fe15:429e as 65536;
  neighbor 2001:888:2001::130 as 199036;
  multihop;
}

protocol bgp core1_v4 from core4 {
  description "Core Router";
  local 169.254.253.1 as 65536;
  neighbor 169.254.253.2 as 65536;
  rr client;
}

protocol bgp core1_v6 from core6 {
  description "Core Router";
  local fd00:169:254:253::1 as 65536;
  neighbor fd00:169:254:253::2 as 65536;
  rr client;
}

define AS_SET_FOR_65551_4 = [
    23.128.24.0/24,
    23.141.112.0/24,
    23.157.160.0/24,
    27.0.0.0/24,
    27.50.0.0/22,
    39.0.1.0/24,
    44.26.163.0/24,
    44.26.165.0/24,
    45.86.127.0/24,
    45.129.94.0/24,
    84.205.64.0/19{24,24},
    93.175.144.0/24,
    93.175.146.0/23{24,24},
    93.175.148.0/22{24,24},
    103.0.0.0/16,
    103.1.0.0/22,
    103.1.4.0/24,
    106.0.1.0/24,
    185.44.82.0/23{23,24},
    185.133.211.0/24
];


protocol bgp CUSTOMER_AS65551_v4 from customer4 {
  description "ACME Inc.";
  local 203.0.113.4 as 65536;
  neighbor 203.0.113.220 as 65551;
  disabled yes;

  ipv4 {
    import filter {
      if !(net ~ AS_SET_FOR_65551_4) then
        reject "prefix is not in IRR AS SET AS-NEPTUNE-NETWORKS - REJECTING ", net;

      customer_import();
    };

    export filter {
      add_as_specific_prepends(65551);
      handle_as_specific_no_export(65551);
      customer_export();
    };
  };
}

define AS_SET_FOR_65551_6 = [
    2001:678:c44::/48,
    2001:678:c4c::/48,
    2001:678:c6c::/48,
    2001:67c:2ea8::/48,
    2001:7fb:fd02::/47{48,48},
    2001:7fb:fd04::/48,
    2001:7fb:fe00::/45{48,48},
    2001:7fb:fe0a::/47{48,48},
    2001:7fb:fe0c::/46{48,48},
    2001:7fb:fe10::/48,
    2001:7fb:fe12::/47{48,48},
    2001:7fb:fe14::/46{48,48},
    2001:7fb:ff00::/45{48,48},
    2001:7fb:ff0a::/47{48,48},
    2001:7fb:ff0c::/46{48,48},
    2001:7fb:ff10::/48,
    2001:7fb:ff12::/47{48,48},
    2001:7fb:ff14::/46{48,48},
    2602:fe2e::/36,
    2602:fe2e:fff::/48,
    2a01:208::/32,
    2a09:7::/36,
    2a09:11c0:130::/44,
    2a0c:e641::/36,
    2a0e:46c5::/32,
    2a0e:7d44::/40,
    2a0e:8f00:fa00::/40,
    2a0e:8f00:fa02::/48,
    2a0e:b107:280::/44,
    2a0f:85c1:21::/48,
    2a0f:85c1:22::/48
];


protocol bgp CUSTOMER_AS65551_v6 from customer6 {
  description "ACME Inc.";
  local fd00:504:36::3b4:0 as 65536;
  neighbor fd00:504:36:0:3:2:0 as 65551;
  disabled yes;

  ipv6 {
    import filter {
      if !(net ~ AS_SET_FOR_65551_6) then
        reject "prefix is not in IRR AS SET AS-NEPTUNE-NETWORKS - REJECTING ", net;

      customer_import();
    };

    export filter {
      add_as_specific_prepends(65551);
      handle_as_specific_no_export(65551);
      customer_export();
    };
  };
}

protocol bgp PEER_AS15169_v4 from peer4 {
  description "Google";
  local 203.0.113.4 as 65536;
  neighbor 203.0.113.41 as 15169;
  password "912ec803b2c";

  ipv4 {
    export filter {
      add_as_specific_prepends(15169);
      handle_as_specific_no_export(15169);
      peer_export();
    };
  };
}

protocol bgp PEER_AS15169_v6 from peer6 {
  description "Google";
  local fd00:504:36::3b4:0 as 65536;
  neighbor fd00:504:36::3b41:0 as 15169;
  password "912ec803b2c";

  ipv6 {
    export filter {
      add_as_specific_prepends(15169);
      handle_as_specific_no_export(15169);
      peer_export();
    };
  };
}


# vim: set ft=bird nofoldenable: